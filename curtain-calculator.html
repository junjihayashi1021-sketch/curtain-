<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>カーテン仕様計算ツール</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@300;400;600&family=Shippori+Mincho:wght@400;600&family=DM+Mono:wght@300;400&display=swap" rel="stylesheet">
<style>
  :root {
    --sand: #F5F0E8;
    --warm-white: #FDFAF5;
    --charcoal: #2C2825;
    --mid: #6B6460;
    --accent: #B8866E;
    --accent-light: #E8D5C8;
    --line: #DDD5C8;
    --result-bg: #2C2825;
    --result-fg: #F5F0E8;
    --green: #5A7A5E;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--sand);
    color: var(--charcoal);
    font-family: 'Noto Serif JP', serif;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  header {
    width: 100%;
    padding: 48px 40px 32px;
    border-bottom: 1px solid var(--line);
    background: var(--warm-white);
    text-align: center;
  }

  header .eyebrow {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    letter-spacing: 0.25em;
    color: var(--accent);
    text-transform: uppercase;
    margin-bottom: 12px;
  }

  header h1 {
    font-family: 'Shippori Mincho', serif;
    font-size: clamp(22px, 4vw, 36px);
    font-weight: 600;
    letter-spacing: 0.08em;
    color: var(--charcoal);
  }

  header p {
    margin-top: 8px;
    font-size: 13px;
    color: var(--mid);
    font-weight: 300;
    letter-spacing: 0.05em;
  }

  .main-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0;
    width: 100%;
    max-width: 1100px;
    margin: 48px auto;
    padding: 0 24px;
  }

  @media (max-width: 768px) {
    .main-grid { grid-template-columns: 1fr; padding: 0 16px; margin: 24px auto; }
  }

  .panel {
    background: var(--warm-white);
    border: 1px solid var(--line);
  }

  .panel + .panel { border-left: none; }

  @media (max-width: 768px) {
    .panel + .panel { border-left: 1px solid var(--line); border-top: none; }
  }

  .panel-header {
    padding: 24px 32px 20px;
    border-bottom: 1px solid var(--line);
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .panel-num {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    color: var(--accent);
    background: var(--accent-light);
    border-radius: 2px;
    padding: 3px 8px;
    letter-spacing: 0.1em;
  }

  .panel-title {
    font-family: 'Shippori Mincho', serif;
    font-size: 16px;
    letter-spacing: 0.1em;
  }

  .panel-body {
    padding: 28px 32px;
  }

  .form-group {
    margin-bottom: 24px;
  }

  label {
    display: block;
    font-size: 12px;
    letter-spacing: 0.12em;
    color: var(--mid);
    margin-bottom: 8px;
    font-weight: 400;
  }

  label span {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    color: var(--accent);
    margin-left: 6px;
  }

  input[type="number"] {
    width: 100%;
    padding: 12px 16px;
    border: 1px solid var(--line);
    background: var(--sand);
    color: var(--charcoal);
    font-family: 'DM Mono', monospace;
    font-size: 15px;
    border-radius: 2px;
    outline: none;
    transition: border-color 0.2s;
  }

  input[type="number"]:focus {
    border-color: var(--accent);
  }

  .radio-group {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }

  .radio-btn {
    flex: 1;
    min-width: 80px;
  }

  .radio-btn input { display: none; }

  .radio-btn label {
    display: block;
    padding: 10px 8px;
    border: 1px solid var(--line);
    background: var(--sand);
    text-align: center;
    cursor: pointer;
    font-size: 13px;
    letter-spacing: 0.05em;
    color: var(--charcoal);
    transition: all 0.15s;
    margin-bottom: 0;
    border-radius: 2px;
    user-select: none;
  }

  .radio-btn input:checked + label {
    background: var(--charcoal);
    border-color: var(--charcoal);
    color: var(--warm-white);
  }

  .divider {
    margin: 28px 0;
    height: 1px;
    background: var(--line);
  }

  .section-label {
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.2em;
    color: var(--accent);
    text-transform: uppercase;
    margin-bottom: 16px;
  }

  /* Results */
  .result-panel {
    background: var(--result-bg);
    border: none;
    color: var(--result-fg);
  }

  .result-panel .panel-header {
    border-bottom-color: rgba(255,255,255,0.1);
  }

  .result-panel .panel-title { color: var(--sand); }
  .result-panel .panel-num { background: rgba(184,134,110,0.3); color: var(--accent-light); }

  .result-area {
    padding: 28px 32px;
  }

  .result-block {
    margin-bottom: 24px;
  }

  .result-block-title {
    font-size: 11px;
    letter-spacing: 0.2em;
    color: var(--accent-light);
    font-family: 'DM Mono', monospace;
    text-transform: uppercase;
    margin-bottom: 16px;
    opacity: 0.7;
  }

  .result-row {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    padding: 12px 0;
    border-bottom: 1px solid rgba(255,255,255,0.07);
  }

  .result-row:last-child { border-bottom: none; }

  .result-label {
    font-size: 13px;
    color: rgba(245,240,232,0.7);
    letter-spacing: 0.05em;
  }

  .result-value {
    font-family: 'DM Mono', monospace;
    font-size: 22px;
    color: var(--sand);
    letter-spacing: 0.02em;
  }

  .result-value.highlight {
    color: #D4A574;
    font-size: 28px;
  }

  .result-value .unit {
    font-size: 12px;
    color: rgba(245,240,232,0.5);
    margin-left: 4px;
  }

  .result-note {
    margin-top: 8px;
    font-size: 11px;
    color: rgba(245,240,232,0.4);
    line-height: 1.6;
    letter-spacing: 0.04em;
  }

  .formula-box {
    background: rgba(255,255,255,0.05);
    border-left: 2px solid var(--accent);
    padding: 12px 16px;
    margin-top: 20px;
    border-radius: 0 2px 2px 0;
  }

  .formula-box .f-label {
    font-family: 'DM Mono', monospace;
    font-size: 9px;
    letter-spacing: 0.2em;
    color: var(--accent-light);
    opacity: 0.6;
    text-transform: uppercase;
    margin-bottom: 6px;
  }

  .formula-box .f-text {
    font-family: 'DM Mono', monospace;
    font-size: 12px;
    color: rgba(245,240,232,0.7);
    line-height: 1.8;
  }

  /* Roman shade panel */
  .roman-panel {
    grid-column: 1 / -1;
    border-top: none;
    margin-top: 0;
    display: flex;
    flex-wrap: wrap;
  }

  .roman-inner {
    flex: 1;
    min-width: 280px;
    padding: 28px 32px;
    border-right: 1px solid var(--line);
  }

  .roman-inner:last-child { border-right: none; }

  .roman-result {
    flex: 1;
    min-width: 280px;
    background: var(--result-bg);
    padding: 28px 32px;
  }

  .calc-btn {
    width: 100%;
    padding: 16px;
    background: var(--accent);
    color: white;
    border: none;
    cursor: pointer;
    font-family: 'Noto Serif JP', serif;
    font-size: 14px;
    letter-spacing: 0.15em;
    border-radius: 2px;
    transition: background 0.2s;
    margin-top: 8px;
  }

  .calc-btn:hover { background: #A67660; }

  .runner-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 8px;
    margin-top: 8px;
  }

  .runner-card {
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 2px;
    padding: 12px;
    text-align: center;
  }

  .runner-card .rc-label {
    font-size: 10px;
    color: rgba(245,240,232,0.5);
    letter-spacing: 0.1em;
    margin-bottom: 6px;
  }

  .runner-card .rc-value {
    font-family: 'DM Mono', monospace;
    font-size: 20px;
    color: var(--sand);
  }

  .runner-card .rc-unit {
    font-size: 10px;
    color: rgba(245,240,232,0.4);
  }

  footer {
    text-align: center;
    padding: 32px;
    font-size: 11px;
    color: var(--mid);
    letter-spacing: 0.08em;
    border-top: 1px solid var(--line);
    width: 100%;
    margin-top: auto;
  }

  .tag {
    display: inline-block;
    background: var(--accent-light);
    color: var(--accent);
    font-size: 10px;
    padding: 2px 8px;
    border-radius: 2px;
    font-family: 'DM Mono', monospace;
    letter-spacing: 0.1em;
    margin-right: 6px;
    vertical-align: middle;
  }

  .separator-text {
    text-align: center;
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.2em;
    color: var(--accent);
    padding: 20px 0 4px;
    opacity: 0.8;
    text-transform: uppercase;
    grid-column: 1 / -1;
  }
</style>
</head>
<body>

<header>
  <div class="eyebrow">Interior Specification Tool</div>
  <h1>カーテン・ローマンシェード 仕様計算</h1>
  <p>たたみ代（溜まり）・必要ランナー数を実務計算式で算出</p>
</header>

<div class="main-grid">
  <!-- 入力パネル -->
  <div class="panel">
    <div class="panel-header">
      <span class="panel-num">01</span>
      <span class="panel-title">カーテン — 入力</span>
    </div>
    <div class="panel-body">

      <div class="section-label">基本寸法</div>

      <div class="form-group">
        <label>仕上がり幅 W <span>mm</span></label>
        <input type="number" id="c-width" value="1800" min="100" step="10">
      </div>

      <div class="divider"></div>
      <div class="section-label">仕様</div>

      <div class="form-group">
        <label>ヒダ倍率</label>
        <div class="radio-group">
          <div class="radio-btn">
            <input type="radio" name="pleat" id="pleat2" value="2" checked>
            <label for="pleat2">2倍ヒダ</label>
          </div>
          <div class="radio-btn">
            <input type="radio" name="pleat" id="pleat15" value="1.5">
            <label for="pleat15">1.5倍ヒダ</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>生地の厚さ</label>
        <div class="radio-group">
          <div class="radio-btn">
            <input type="radio" name="fabric" id="fab-thin" value="20" checked>
            <label for="fab-thin">薄手<br><small style="opacity:.6">α=20mm</small></label>
          </div>
          <div class="radio-btn">
            <input type="radio" name="fabric" id="fab-std" value="40">
            <label for="fab-std">標準<br><small style="opacity:.6">α=40mm</small></label>
          </div>
          <div class="radio-btn">
            <input type="radio" name="fabric" id="fab-thick" value="60">
            <label for="fab-thick">厚手<br><small style="opacity:.6">α=60mm</small></label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>開き方</label>
        <div class="radio-group">
          <div class="radio-btn">
            <input type="radio" name="open" id="open-both" value="both" checked>
            <label for="open-both">両開き</label>
          </div>
          <div class="radio-btn">
            <input type="radio" name="open" id="open-single" value="single">
            <label for="open-single">片開き</label>
          </div>
        </div>
      </div>

      <div class="divider"></div>
      <div class="section-label">ランナー数</div>

      <div class="form-group">
        <label>ヒダ山数（片側） <span>山</span></label>
        <input type="number" id="c-pleat-num" value="10" min="1" step="1">
      </div>

      <button class="calc-btn" onclick="calcCurtain()">計　算</button>
    </div>
  </div>

  <!-- 結果パネル -->
  <div class="panel result-panel">
    <div class="panel-header">
      <span class="panel-num">02</span>
      <span class="panel-title" style="color:var(--sand)">カーテン — 計算結果</span>
    </div>
    <div class="result-area" id="curtain-result">
      <p style="color:rgba(245,240,232,0.3);font-size:13px;letter-spacing:0.1em;padding-top:24px;">← 入力して計算ボタンを押してください</p>
    </div>
  </div>

  <div class="separator-text">── Roman Shade ──</div>

  <!-- ローマンシェード入力 -->
  <div class="panel" style="border-top:none;">
    <div class="panel-header">
      <span class="panel-num">03</span>
      <span class="panel-title">ローマンシェード — 入力</span>
    </div>
    <div class="panel-body">
      <div class="section-label">基本寸法</div>

      <div class="form-group">
        <label>仕上がり幅 W <span>mm</span></label>
        <input type="number" id="r-width" value="900" min="100" step="10">
      </div>
      <div class="form-group">
        <label>仕上がり丈 H <span>mm</span></label>
        <input type="number" id="r-height" value="1800" min="100" step="10">
      </div>

      <div class="divider"></div>
      <div class="section-label">スタイル</div>

      <div class="form-group">
        <label>たたみ代タイプ</label>
        <div class="radio-group">
          <div class="radio-btn">
            <input type="radio" name="roman-type" id="rt-flat" value="flat" checked>
            <label for="rt-flat">フラット</label>
          </div>
          <div class="radio-btn">
            <input type="radio" name="roman-type" id="rt-balloon" value="balloon">
            <label for="rt-balloon">バルーン</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>シェード枚数</label>
        <input type="number" id="r-count" value="1" min="1" max="10" step="1">
      </div>

      <div class="form-group">
        <label>ドラムピッチ <span>mm</span><br><small style="color:rgba(107,100,96,0.7);font-size:11px">コード止め間隔（一般的に200〜300mm）</small></label>
        <input type="number" id="r-drum-pitch" value="250" min="100" step="10">
      </div>

      <button class="calc-btn" onclick="calcRoman()">計　算</button>
    </div>
  </div>

  <!-- ローマンシェード結果 -->
  <div class="panel result-panel" style="border-top:none;">
    <div class="panel-header">
      <span class="panel-num">04</span>
      <span class="panel-title" style="color:var(--sand)">ローマンシェード — 計算結果</span>
    </div>
    <div class="result-area" id="roman-result">
      <p style="color:rgba(245,240,232,0.3);font-size:13px;letter-spacing:0.1em;padding-top:24px;">← 入力して計算ボタンを押してください</p>
    </div>
  </div>
</div>

<footer>Interior Specification Calculator &nbsp;|&nbsp; 実務計算式準拠 &nbsp;|&nbsp; 数値は目安です。実際の施工時には現場確認を行ってください。</footer>

<script>
function calcCurtain() {
  const W = parseFloat(document.getElementById('c-width').value);
  const pleat = parseFloat(document.querySelector('input[name="pleat"]:checked').value);
  const alpha = parseFloat(document.querySelector('input[name="fabric"]:checked').value);
  const openType = document.querySelector('input[name="open"]:checked').value;
  const pleatNum = parseInt(document.getElementById('c-pleat-num').value);

  if (!W || W <= 0) { alert('仕上がり幅を正しく入力してください'); return; }

  // たたみ代（片側）
  // 2倍ヒダ: W÷4 + α  /  1.5倍ヒダ: W÷5 + α
  let stackPerSide;
  let formula;
  if (pleat === 2) {
    stackPerSide = W / 4 + alpha;
    formula = `W ÷ 4 + α = ${W} ÷ 4 + ${alpha}`;
  } else {
    stackPerSide = W / 5 + alpha;
    formula = `W ÷ 5 + α = ${W} ÷ 5 + ${alpha}`;
  }

  const stackPerSideRounded = Math.ceil(stackPerSide / 5) * 5; // 5mm単位繰り上げ

  let totalStack, openLabel;
  if (openType === 'both') {
    totalStack = stackPerSideRounded * 2;
    openLabel = '両側合計';
  } else {
    totalStack = stackPerSideRounded;
    openLabel = '片側合計';
  }

  // ランナー数
  // ランナー数 = ヒダ山数 × ヒダあたりのランナー + 両端各1個
  // 2倍ヒダ: 3本/山, 1.5倍ヒダ: 2本/山
  const runnersPerPleat = pleat === 2 ? 3 : 2;
  const runnersPerPanel = pleatNum * runnersPerPleat + 2; // 両端ランナー+2
  const panels = openType === 'both' ? 2 : 1;
  const totalRunners = runnersPerPanel * panels;

  const res = document.getElementById('curtain-result');
  res.innerHTML = `
    <div class="result-block">
      <div class="result-block-title">たたみ代（溜まり）</div>
      <div class="result-row">
        <span class="result-label">片側たたみ代</span>
        <span class="result-value highlight">${stackPerSideRounded}<span class="unit">mm</span></span>
      </div>
      <div class="result-row">
        <span class="result-label">${openLabel}</span>
        <span class="result-value">${totalStack}<span class="unit">mm</span></span>
      </div>
      <div class="formula-box">
        <div class="f-label">使用計算式（片側）</div>
        <div class="f-text">${formula} = ${stackPerSide.toFixed(1)} mm<br>→ 5mm繰上 = ${stackPerSideRounded} mm</div>
        <div class="f-text" style="margin-top:6px;opacity:0.6">α（余裕分）: 薄手=20 / 標準=40 / 厚手=60 mm</div>
      </div>
    </div>

    <div class="result-block" style="margin-top:24px;">
      <div class="result-block-title">ランナー数</div>
      <div class="runner-grid">
        <div class="runner-card">
          <div class="rc-label">1パネル</div>
          <div class="rc-value">${runnersPerPanel}</div>
          <div class="rc-unit">個</div>
        </div>
        ${panels === 2 ? `<div class="runner-card">
          <div class="rc-label">2パネル合計</div>
          <div class="rc-value">${totalRunners}</div>
          <div class="rc-unit">個</div>
        </div>` : ''}
      </div>
      <div class="result-note" style="margin-top:12px;">
        算出根拠：ヒダ山${pleatNum}山 × ${runnersPerPleat}本/山（${pleat}倍ヒダ）+ 両端2個 = ${runnersPerPanel}個/パネル
      </div>
    </div>

    <div style="margin-top:20px;padding-top:16px;border-top:1px solid rgba(255,255,255,0.08);">
      <div class="result-block-title" style="margin-bottom:8px;">入力条件</div>
      <div class="result-note">
        W = ${W}mm ／ ${pleat}倍ヒダ ／ α=${alpha}mm ／ ${openType === 'both' ? '両開き' : '片開き'}
      </div>
    </div>
  `;
}

function calcRoman() {
  const W = parseFloat(document.getElementById('r-width').value);
  const H = parseFloat(document.getElementById('r-height').value);
  const romanType = document.querySelector('input[name="roman-type"]:checked').value;
  const count = parseInt(document.getElementById('r-count').value);
  const drumPitch = parseFloat(document.getElementById('r-drum-pitch').value);

  if (!W || W <= 0 || !H || H <= 0) { alert('寸法を正しく入力してください'); return; }

  // たたみ代（縦方向）
  // フラット: H × 1/6（一般目安）、バルーン: H × 1/5
  let stackRatio, stackH;
  if (romanType === 'flat') {
    stackRatio = 1 / 6;
    stackH = H * stackRatio;
  } else {
    stackRatio = 1 / 5;
    stackH = H * stackRatio;
  }
  const stackHRounded = Math.ceil(stackH / 10) * 10; // 10mm繰上

  // ランナー（リング）数
  // 縦方向リング数 = Math.ceil(H ÷ リングピッチ) + 1（上端含む）
  // 横方向コード列数 = Math.ceil(W ÷ ドラムピッチ) + 1（両端含む）
  const ringPitch = 200; // 一般的なリングピッチ200mm
  const vertRings = Math.ceil(H / ringPitch) + 1;
  const horizCords = Math.ceil(W / drumPitch) + 1;
  const ringsPerShade = vertRings * horizCords;
  const totalRings = ringsPerShade * count;

  const res = document.getElementById('roman-result');
  res.innerHTML = `
    <div class="result-block">
      <div class="result-block-title">たたみ代（縦方向）</div>
      <div class="result-row">
        <span class="result-label">たたみ代（1枚）</span>
        <span class="result-value highlight">${stackHRounded}<span class="unit">mm</span></span>
      </div>
      ${count > 1 ? `<div class="result-row">
        <span class="result-label">${count}枚分</span>
        <span class="result-value">${stackHRounded * count}<span class="unit">mm（参考）</span></span>
      </div>` : ''}
      <div class="formula-box">
        <div class="f-label">使用計算式</div>
        <div class="f-text">
          H × 1/${romanType === 'flat' ? '6' : '5'} = ${H} × ${stackRatio.toFixed(4)} = ${stackH.toFixed(1)} mm<br>
          → 10mm繰上 = ${stackHRounded} mm
        </div>
        <div class="f-text" style="margin-top:6px;opacity:0.6">
          ${romanType === 'flat' ? 'フラット：H×1/6' : 'バルーン：H×1/5（ふっくら分を加味）'}
        </div>
      </div>
    </div>

    <div class="result-block" style="margin-top:24px;">
      <div class="result-block-title">リング（ランナー）数</div>
      <div class="runner-grid">
        <div class="runner-card">
          <div class="rc-label">縦方向（1列）</div>
          <div class="rc-value">${vertRings}</div>
          <div class="rc-unit">個</div>
        </div>
        <div class="runner-card">
          <div class="rc-label">コード列数</div>
          <div class="rc-value">${horizCords}</div>
          <div class="rc-unit">列</div>
        </div>
        <div class="runner-card">
          <div class="rc-label">1枚あたり</div>
          <div class="rc-value">${ringsPerShade}</div>
          <div class="rc-unit">個</div>
        </div>
        ${count > 1 ? `<div class="runner-card">
          <div class="rc-label">${count}枚合計</div>
          <div class="rc-value">${totalRings}</div>
          <div class="rc-unit">個</div>
        </div>` : ''}
      </div>
      <div class="result-note" style="margin-top:12px;">
        縦リングピッチ200mm基準 ／ ドラムピッチ${drumPitch}mm ／ 両端コード列含む
      </div>
    </div>

    <div style="margin-top:20px;padding-top:16px;border-top:1px solid rgba(255,255,255,0.08);">
      <div class="result-block-title" style="margin-bottom:8px;">入力条件</div>
      <div class="result-note">
        W = ${W}mm ／ H = ${H}mm ／ ${romanType === 'flat' ? 'フラット' : 'バルーン'} ／ ${count}枚 ／ ドラムピッチ${drumPitch}mm
      </div>
    </div>
  `;
}

// 初期計算
window.onload = () => { calcCurtain(); calcRoman(); };
</script>
</body>
</html>
